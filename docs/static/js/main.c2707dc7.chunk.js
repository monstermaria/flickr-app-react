(this["webpackJsonpflickr-app-react"]=this["webpackJsonpflickr-app-react"]||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var a=r(0),l=r.n(a),c=r(6),n=r.n(c),s=(r(14),r(8)),o=r(1),i=r(2),u=r(4),m=r(3),h=r(7),p=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={searchTerm:""},e.onChange=function(t){e.setState(Object(h.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault(),e.getPictures(e.state.searchTerm)},e}return Object(i.a)(r,[{key:"getPictures",value:function(e){var t=this;fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=b54580f369a7eeebecb2004dc429d08f&format=json&nojsoncallback=1&text="+e).then((function(e){return e.json()})).then((function(e){e.photos&&e.photos.photo&&t.props.setSearchResult(e.photos.photo)})).catch((function(e){console.log("Oops! Something went wrong..."),console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("form",{className:"searchfield",onSubmit:this.onSubmit},l.a.createElement("input",{type:"text",name:"searchTerm",value:this.state.searchTerm,placeholder:"Search flickr for photos...",className:"searchfield__input",onChange:this.onChange,autoFocus:!0}),l.a.createElement("input",{className:"searchfield__submit-button",type:"submit",value:"Search"}))}}]),r}(l.a.Component),y=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).showGallery=function(){document.querySelector(".gallery").classList.add("visible"),document.querySelector(".searchresults").classList.add("clipped")},e}return Object(i.a)(r,[{key:"render",value:function(){return l.a.createElement("div",{className:"controls"},l.a.createElement("div",{className:"logo__wrapper"}),l.a.createElement(p,{setSearchResult:this.props.setSearchResult}),l.a.createElement("div",{className:"gallery-button__wrapper"},l.a.createElement("button",{className:"gallery-button",onClick:this.showGallery},"Show Gallery")))}}]),r}(l.a.Component),f=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).toggleSelected=function(t){t.currentTarget.classList.contains("selected")?e.props.removeFromGallery(t.target.src):e.props.addToGallery(t.target.src)},e.getListItem=function(t){return l.a.createElement("li",{key:t.url,className:t.selected?"selected":"",onClick:e.toggleSelected},l.a.createElement("img",{src:t.url,alt:t.title}))},e}return Object(i.a)(r,[{key:"render",value:function(){return l.a.createElement("div",{className:"searchresults"},l.a.createElement("ul",{className:"searchresults__list"},this.props.photos.map(this.getListItem)))}}]),r}(l.a.Component),g=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).hideGallery=function(e){e.target.classList.contains("gallery")&&(e.target.classList.remove("visible"),document.querySelector(".searchresults").classList.remove("clipped"))},e.getListItem=function(t,r){var a=r===e.props.currentPicture?"visible":"",c=t.replace(/(_m\.jpg$)/,".jpg");return l.a.createElement("li",{key:r,className:a},l.a.createElement("img",{src:c,alt:t}),l.a.createElement("div",{className:"gallery__X",onClick:e.props.removeFromGallery.bind(null,t)},"X"))},e}return Object(i.a)(r,[{key:"render",value:function(){return l.a.createElement("div",{className:"gallery",onClick:this.hideGallery},l.a.createElement("div",{className:"gallery__content"},l.a.createElement("div",{className:"gallery__controls"},l.a.createElement("button",{className:"gallery__control-left",onClick:this.props.updateCurrentPicture.bind(null,"previous")},"<"),l.a.createElement("button",{className:"gallery__control-right",onClick:this.props.updateCurrentPicture.bind(null,"next")},">")),l.a.createElement("ul",{className:"gallery__list"},this.props.photos.map(this.getListItem))))}}]),r}(l.a.Component);function d(){try{if(!localStorage.flickrGallery)return[];var e=JSON.parse(localStorage.flickrGallery);if(!Array.isArray(e))throw new Error("Parsed JSON is not an array");return e}catch(t){return console.log("Unable to read gallery from local storage"),console.log(t),[]}}var v=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(o.a)(this,r);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={searchResult:[],gallery:d(),currentPicture:0},e.setSearchResult=function(t){e.setState({searchResult:t.map((function(t){var r="https://farm"+t.farm+".staticflickr.com/"+t.server+"/"+t.id+"_"+t.secret+"_m.jpg";return{url:r,title:t.title,selected:e.state.gallery.includes(r)}}))})},e.addToGallery=function(t){if(!e.state.gallery.includes(t)){var r=[].concat(Object(s.a)(e.state.gallery),[t]);localStorage.flickrGallery=JSON.stringify(r),e.setState({gallery:r,searchResult:e.state.searchResult.map((function(e){return t===e.url?(e.selected=!0,e):e}))})}},e.removeFromGallery=function(t){var r=e.state.gallery.length-1,a=e.state.gallery[r],l=e.state.currentPicture;t===a&&l>0&&l--;var c=e.state.gallery.filter((function(e){return e!==t}));localStorage.flickrGallery=JSON.stringify(c),e.setState({currentPicture:l,gallery:c,searchResult:e.state.searchResult.map((function(e){return t===e.url?(e.selected=!1,e):e}))})},e.updateCurrentPicture=function(t){var r=e.state.currentPicture;"previous"===t&&r>0&&e.setState({currentPicture:r-1}),"next"===t&&r<e.state.gallery.length-1&&e.setState({currentPicture:r+1})},e}return Object(i.a)(r,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(y,{setSearchResult:this.setSearchResult}),l.a.createElement("div",{className:"message__container"}),l.a.createElement(f,{photos:this.state.searchResult,addToGallery:this.addToGallery,removeFromGallery:this.removeFromGallery}),l.a.createElement(g,{photos:this.state.gallery,currentPicture:this.state.currentPicture,updateCurrentPicture:this.updateCurrentPicture,removeFromGallery:this.removeFromGallery}))}}]),r}(l.a.Component);n.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(v,null)),document.getElementById("root"))},9:function(e,t,r){e.exports=r(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.c2707dc7.chunk.js.map