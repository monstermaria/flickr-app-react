{"version":3,"sources":["components/SearchPictures.js","components/Header.js","components/SearchResults.js","components/Gallery.js","App.js","index.js"],"names":["SearchPictures","state","searchTerm","onChange","event","setState","target","name","value","onSubmit","preventDefault","getPictures","fetch","then","response","json","photos","photo","props","setSearchResult","catch","error","console","log","className","this","type","placeholder","autoFocus","React","Component","Header","showGallery","document","querySelector","classList","add","onClick","SearchResults","toggleSelected","currentTarget","contains","removeFromGallery","src","addToGallery","getListItem","photoInfo","key","url","selected","alt","title","map","Gallery","hideGallery","remove","index","visibility","currentPicture","bigUrl","replace","bind","updateCurrentPicture","loadGallery","localStorage","flickrGallery","gallery","JSON","parse","Array","isArray","Error","App","searchResult","farm","server","id","secret","includes","urlToAdd","newGallery","stringify","urlToRemove","lastPictureIndex","length","urlLastPicture","filter","direction","ReactDOM","render","StrictMode","getElementById"],"mappings":"6OA+DeA,E,4MA3DXC,MAAQ,CAAEC,WAAY,I,EAwBtBC,SAAW,SAACC,GACR,EAAKC,SAAL,eAAiBD,EAAME,OAAOC,KAAOH,EAAME,OAAOE,S,EAGtDC,SAAW,SAACL,GACRA,EAAMM,iBACN,EAAKC,YAAY,EAAKV,MAAMC,a,0DA5BpBA,GAAa,IAAD,OAOpBU,MALI,gJAGAV,GAGCW,MAAK,SAACC,GACH,OAAOA,EAASC,UAEnBF,MAAK,SAACE,GACHA,EAAKC,QACDD,EAAKC,OAAOC,OACZ,EAAKC,MAAMC,gBAAgBJ,EAAKC,OAAOC,UAE9CG,OAAM,SAACC,GACJC,QAAQC,IAAI,iCACZD,QAAQC,IAAIF,Q,+BAcpB,OACI,0BAAMG,UAAU,cAAcf,SAAUgB,KAAKhB,UACzC,2BACIiB,KAAK,OACLnB,KAAK,aACLC,MAAOiB,KAAKxB,MAAMC,WAClByB,YAAY,8BACZH,UAAU,qBACVrB,SAAUsB,KAAKtB,SACfyB,WAAS,IAEb,2BACIJ,UAAU,6BACVE,KAAK,SACLlB,MAAM,gB,GAjDGqB,IAAMC,WC6BpBC,E,4MA3BXC,YAAc,WACVC,SAASC,cAAc,YAAYC,UAAUC,IAAI,WACjDH,SAASC,cAAc,kBAAkBC,UAAUC,IAAI,Y,uDAIvD,OACI,yBAAKZ,UAAU,YACX,yBAAKA,UAAU,kBACf,kBAAC,EAAD,CAAgBL,gBAAiBM,KAAKP,MAAMC,kBAC5C,yBAAKK,UAAU,2BACX,4BACIA,UAAU,iBACVa,QAASZ,KAAKO,aAFlB,sB,GAZCH,IAAMC,WCuCZQ,E,4MAvCXC,eAAiB,SAACnC,GAEIA,EAAMoC,cAAcL,UACxBM,SAAS,YACnB,EAAKvB,MAAMwB,kBAAkBtC,EAAME,OAAOqC,KAE1C,EAAKzB,MAAM0B,aAAaxC,EAAME,OAAOqC,M,EAI7CE,YAAc,SAACC,GACX,OACI,wBACIC,IAAKD,EAAUE,IACfxB,UAAWsB,EAAUG,SAAW,WAAa,GAC7CZ,QAAS,EAAKE,gBAEd,yBAAKI,IAAKG,EAAUE,IAAKE,IAAKJ,EAAUK,U,uDAMhD,OACI,yBAAK3B,UAAU,iBACX,wBAAIA,UAAU,uBACTC,KAAKP,MAAMF,OAAOoC,IAAI3B,KAAKoB,mB,GA3BpBhB,IAAMC,WCmEnBuB,E,4MAlEXC,YAAc,SAAClD,GACPA,EAAME,OAAO6B,UAAUM,SAAS,aAChCrC,EAAME,OAAO6B,UAAUoB,OAAO,WAC9BtB,SACKC,cAAc,kBACdC,UAAUoB,OAAO,a,EAI9BV,YAAc,SAACG,EAAKQ,GAChB,IAAMC,EAAaD,IAAU,EAAKtC,MAAMwC,eAAiB,UAAY,GAC/DC,EAASX,EAAIY,QAAQ,aAAc,QAEzC,OACI,wBAAIb,IAAKS,EAAOhC,UAAWiC,GACvB,yBAAKd,IAAKgB,EAAQT,IAAKF,IACvB,yBACIxB,UAAU,aACVa,QAAS,EAAKnB,MAAMwB,kBAAkBmB,KAAK,KAAMb,IAFrD,O,uDAWR,OACI,yBAAKxB,UAAU,UAAUa,QAASZ,KAAK6B,aACnC,yBAAK9B,UAAU,oBACX,yBAAKA,UAAU,qBACX,4BACIA,UAAU,wBACVa,QAASZ,KAAKP,MAAM4C,qBAAqBD,KACrC,KACA,aAGH,KAEL,4BACIrC,UAAU,yBACVa,QAASZ,KAAKP,MAAM4C,qBAAqBD,KACrC,KACA,SAGH,MAGT,wBAAIrC,UAAU,iBACTC,KAAKP,MAAMF,OAAOoC,IAAI3B,KAAKoB,oB,GApD9BhB,IAAMC,WCE5B,SAASiC,IACL,IAGI,IAFoBC,aAAaC,cAG7B,MAAO,GAEX,IAAMC,EAAUC,KAAKC,MAAMJ,aAAaC,eACxC,IAAKI,MAAMC,QAAQJ,GACf,MAAM,IAAIK,MAAM,+BAEpB,OAAOL,EACT,MAAO7C,GAGL,OAFAC,QAAQC,IAAI,6CACZD,QAAQC,IAAIF,GACL,I,IA4HAmD,E,4MAvHXvE,MAAQ,CACJwE,aAAc,GACdP,QAASH,IACTL,eAAgB,G,EAGpBvC,gBAAkB,SAACsD,GACf,EAAKpE,SAAS,CACVoE,aAAcA,EAAarB,KAAI,SAACN,GAC5B,IAAME,EACF,eACAF,EAAU4B,KACV,qBACA5B,EAAU6B,OACV,IACA7B,EAAU8B,GACV,IACA9B,EAAU+B,OACV,SACJ,MAAO,CACH7B,IAAKA,EACLG,MAAOL,EAAUK,MACjBF,SAAU,EAAKhD,MAAMiE,QAAQY,SAAS9B,U,EAMtDJ,aAAe,SAACmC,GAEZ,IAAI,EAAK9E,MAAMiE,QAAQY,SAASC,GAAhC,CAKA,IAAMC,EAAU,sBAAO,EAAK/E,MAAMiE,SAAlB,CAA2Ba,IAC3Cf,aAAaC,cAAgBE,KAAKc,UAAUD,GAG5C,EAAK3E,SAAS,CACV6D,QAASc,EACTP,aAAc,EAAKxE,MAAMwE,aAAarB,KAAI,SAACN,GACvC,OAAIiC,IAAajC,EAAUE,KACvBF,EAAUG,UAAW,EACdH,GAEJA,S,EAKnBJ,kBAAoB,SAACwC,GAIjB,IAAMC,EAAmB,EAAKlF,MAAMiE,QAAQkB,OAAS,EAC/CC,EAAiB,EAAKpF,MAAMiE,QAAQiB,GACtCzB,EAAiB,EAAKzD,MAAMyD,eAE5BwB,IAAgBG,GAAkB3B,EAAiB,GACnDA,IAIJ,IAAMsB,EAAa,EAAK/E,MAAMiE,QAAQoB,QAAO,SAACtC,GAC1C,OAAOA,IAAQkC,KAEnBlB,aAAaC,cAAgBE,KAAKc,UAAUD,GAG5C,EAAK3E,SAAS,CACVqD,iBACAQ,QAASc,EACTP,aAAc,EAAKxE,MAAMwE,aAAarB,KAAI,SAACN,GACvC,OAAIoC,IAAgBpC,EAAUE,KAC1BF,EAAUG,UAAW,EACdH,GAEJA,Q,EAKnBgB,qBAAuB,SAACyB,GACpB,IAAM7B,EAAiB,EAAKzD,MAAMyD,eAEhB,aAAd6B,GACI7B,EAAiB,GACjB,EAAKrD,SAAS,CAAEqD,eAAgBA,EAAiB,IAGvC,SAAd6B,GACI7B,EAAiB,EAAKzD,MAAMiE,QAAQkB,OAAS,GAC7C,EAAK/E,SAAS,CAAEqD,eAAgBA,EAAiB,K,uDAMzD,OACI,6BACI,kBAAC,EAAD,CAAQvC,gBAAiBM,KAAKN,kBAC9B,yBAAKK,UAAU,uBACf,kBAAC,EAAD,CACIR,OAAQS,KAAKxB,MAAMwE,aACnB7B,aAAcnB,KAAKmB,aACnBF,kBAAmBjB,KAAKiB,oBAE5B,kBAAC,EAAD,CACI1B,OAAQS,KAAKxB,MAAMiE,QACnBR,eAAgBjC,KAAKxB,MAAMyD,eAC3BI,qBAAsBrC,KAAKqC,qBAC3BpB,kBAAmBjB,KAAKiB,yB,GAjH1Bb,IAAMC,WCnBxB0D,IAASC,OACL,kBAAC,IAAMC,WAAP,KACI,kBAAC,EAAD,OAEJzD,SAAS0D,eAAe,U","file":"static/js/main.c2707dc7.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass SearchPictures extends React.Component {\r\n    state = { searchTerm: \"\" };\r\n\r\n    getPictures(searchTerm) {\r\n        const searchUrl =\r\n            \"https://api.flickr.com/services/rest/?method=flickr.photos.search&\" +\r\n            \"api_key=b54580f369a7eeebecb2004dc429d08f&format=json&nojsoncallback=1\" +\r\n            \"&text=\" +\r\n            searchTerm;\r\n\r\n        fetch(searchUrl)\r\n            .then((response) => {\r\n                return response.json();\r\n            })\r\n            .then((json) => {\r\n                json.photos &&\r\n                    json.photos.photo &&\r\n                    this.props.setSearchResult(json.photos.photo);\r\n            })\r\n            .catch((error) => {\r\n                console.log(\"Oops! Something went wrong...\");\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    onChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    onSubmit = (event) => {\r\n        event.preventDefault();\r\n        this.getPictures(this.state.searchTerm);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"searchfield\" onSubmit={this.onSubmit}>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"searchTerm\"\r\n                    value={this.state.searchTerm}\r\n                    placeholder=\"Search flickr for photos...\"\r\n                    className=\"searchfield__input\"\r\n                    onChange={this.onChange}\r\n                    autoFocus\r\n                />\r\n                <input\r\n                    className=\"searchfield__submit-button\"\r\n                    type=\"submit\"\r\n                    value=\"Search\"\r\n                />\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nSearchPictures.propTypes = {\r\n    setSearchResult: PropTypes.func.isRequired\r\n};\r\n\r\nexport default SearchPictures;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SearchPictures from \"./SearchPictures\";\r\n\r\nclass Header extends React.Component {\r\n    showGallery = () => {\r\n        document.querySelector(\".gallery\").classList.add(\"visible\");\r\n        document.querySelector(\".searchresults\").classList.add(\"clipped\");\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"controls\">\r\n                <div className=\"logo__wrapper\"></div>\r\n                <SearchPictures setSearchResult={this.props.setSearchResult} />\r\n                <div className=\"gallery-button__wrapper\">\r\n                    <button\r\n                        className=\"gallery-button\"\r\n                        onClick={this.showGallery}\r\n                    >\r\n                        Show Gallery\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nHeader.propTypes = {\r\n    setSearchResult: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass SearchResults extends React.Component {\r\n    toggleSelected = (event) => {\r\n        // currentTarget is the li-element, target is the img-element\r\n        const classList = event.currentTarget.classList;\r\n        if (classList.contains(\"selected\")) {\r\n            this.props.removeFromGallery(event.target.src);\r\n        } else {\r\n            this.props.addToGallery(event.target.src);\r\n        }\r\n    };\r\n\r\n    getListItem = (photoInfo) => {\r\n        return (\r\n            <li\r\n                key={photoInfo.url}\r\n                className={photoInfo.selected ? \"selected\" : \"\"}\r\n                onClick={this.toggleSelected}\r\n            >\r\n                <img src={photoInfo.url} alt={photoInfo.title} />\r\n            </li>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"searchresults\">\r\n                <ul className=\"searchresults__list\">\r\n                    {this.props.photos.map(this.getListItem)}\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nSearchResults.propTypes = {\r\n    photos: PropTypes.array.isRequired,\r\n    addToGallery: PropTypes.func.isRequired,\r\n    removeFromGallery: PropTypes.func.isRequired\r\n};\r\n\r\nexport default SearchResults;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Gallery extends React.Component {\r\n    hideGallery = (event) => {\r\n        if (event.target.classList.contains(\"gallery\")) {\r\n            event.target.classList.remove(\"visible\");\r\n            document\r\n                .querySelector(\".searchresults\")\r\n                .classList.remove(\"clipped\");\r\n        }\r\n    };\r\n\r\n    getListItem = (url, index) => {\r\n        const visibility = index === this.props.currentPicture ? \"visible\" : \"\";\r\n        const bigUrl = url.replace(/(_m\\.jpg$)/, \".jpg\");\r\n\r\n        return (\r\n            <li key={index} className={visibility}>\r\n                <img src={bigUrl} alt={url} />\r\n                <div\r\n                    className=\"gallery__X\"\r\n                    onClick={this.props.removeFromGallery.bind(null, url)}\r\n                >\r\n                    X\r\n                </div>\r\n            </li>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"gallery\" onClick={this.hideGallery}>\r\n                <div className=\"gallery__content\">\r\n                    <div className=\"gallery__controls\">\r\n                        <button\r\n                            className=\"gallery__control-left\"\r\n                            onClick={this.props.updateCurrentPicture.bind(\r\n                                null,\r\n                                \"previous\"\r\n                            )}\r\n                        >\r\n                            {\"<\"}\r\n                        </button>\r\n                        <button\r\n                            className=\"gallery__control-right\"\r\n                            onClick={this.props.updateCurrentPicture.bind(\r\n                                null,\r\n                                \"next\"\r\n                            )}\r\n                        >\r\n                            {\">\"}\r\n                        </button>\r\n                    </div>\r\n                    <ul className=\"gallery__list\">\r\n                        {this.props.photos.map(this.getListItem)}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nGallery.propTypes = {\r\n    photos: PropTypes.array.isRequired,\r\n    currentPicture: PropTypes.number.isRequired,\r\n    updateCurrentPicture: PropTypes.func.isRequired,\r\n    removeFromGallery: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Gallery;\r\n","import React from \"react\";\nimport Header from \"./components/Header\";\nimport SearchResults from \"./components/SearchResults\";\nimport Gallery from \"./components/Gallery\";\n\nfunction loadGallery() {\n    try {\n        const galleryJSON = localStorage.flickrGallery;\n        // no gallery saved yet, galleryJSON is undefined\n        if (!galleryJSON) {\n            return [];\n        }\n        const gallery = JSON.parse(localStorage.flickrGallery);\n        if (!Array.isArray(gallery)) {\n            throw new Error(\"Parsed JSON is not an array\");\n        }\n        return gallery;\n    } catch (error) {\n        console.log(\"Unable to read gallery from local storage\");\n        console.log(error);\n        return [];\n    }\n}\n\nclass App extends React.Component {\n    state = {\n        searchResult: [],\n        gallery: loadGallery(),\n        currentPicture: 0\n    };\n\n    setSearchResult = (searchResult) => {\n        this.setState({\n            searchResult: searchResult.map((photoInfo) => {\n                const url =\n                    \"https://farm\" +\n                    photoInfo.farm +\n                    \".staticflickr.com/\" +\n                    photoInfo.server +\n                    \"/\" +\n                    photoInfo.id +\n                    \"_\" +\n                    photoInfo.secret +\n                    \"_m.jpg\";\n                return {\n                    url: url,\n                    title: photoInfo.title,\n                    selected: this.state.gallery.includes(url)\n                };\n            })\n        });\n    };\n\n    addToGallery = (urlToAdd) => {\n        // add photo only if it is not already in the gallery\n        if (this.state.gallery.includes(urlToAdd)) {\n            return;\n        }\n\n        // save the updated gallery\n        const newGallery = [...this.state.gallery, urlToAdd];\n        localStorage.flickrGallery = JSON.stringify(newGallery);\n\n        // update state\n        this.setState({\n            gallery: newGallery,\n            searchResult: this.state.searchResult.map((photoInfo) => {\n                if (urlToAdd === photoInfo.url) {\n                    photoInfo.selected = true;\n                    return photoInfo;\n                }\n                return photoInfo;\n            })\n        });\n    };\n\n    removeFromGallery = (urlToRemove) => {\n        // if the picture to remove is the last one in the gallery,\n        // and it is the current picture,\n        // make the previous picture the current one\n        const lastPictureIndex = this.state.gallery.length - 1;\n        const urlLastPicture = this.state.gallery[lastPictureIndex];\n        let currentPicture = this.state.currentPicture;\n\n        if (urlToRemove === urlLastPicture && currentPicture > 0) {\n            currentPicture--;\n        }\n\n        // save the updated gallery\n        const newGallery = this.state.gallery.filter((url) => {\n            return url !== urlToRemove;\n        });\n        localStorage.flickrGallery = JSON.stringify(newGallery);\n\n        // update state\n        this.setState({\n            currentPicture,\n            gallery: newGallery,\n            searchResult: this.state.searchResult.map((photoInfo) => {\n                if (urlToRemove === photoInfo.url) {\n                    photoInfo.selected = false;\n                    return photoInfo;\n                }\n                return photoInfo;\n            })\n        });\n    };\n\n    updateCurrentPicture = (direction) => {\n        const currentPicture = this.state.currentPicture;\n\n        if (direction === \"previous\") {\n            if (currentPicture > 0) {\n                this.setState({ currentPicture: currentPicture - 1 });\n            }\n        }\n        if (direction === \"next\") {\n            if (currentPicture < this.state.gallery.length - 1) {\n                this.setState({ currentPicture: currentPicture + 1 });\n            }\n        }\n    };\n\n    render() {\n        return (\n            <div>\n                <Header setSearchResult={this.setSearchResult} />\n                <div className=\"message__container\"></div>\n                <SearchResults\n                    photos={this.state.searchResult}\n                    addToGallery={this.addToGallery}\n                    removeFromGallery={this.removeFromGallery}\n                />\n                <Gallery\n                    photos={this.state.gallery}\n                    currentPicture={this.state.currentPicture}\n                    updateCurrentPicture={this.updateCurrentPicture}\n                    removeFromGallery={this.removeFromGallery}\n                />\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}